import {useEffect} from "react";
import Head from 'next/head';
import {Row} from 'antd';
import { useDispatch } from "react-redux";
import { useSelector } from "react-redux";

import SearchUser from '../components/Users/FindUser/FindUser';
import Welcome from "../components/Welcome/Welcome";
import {setMessagesData} from "../store/messagesSlice";
import { IRootState } from "../store/store";

export default function Home() {
   const dispatch = useDispatch();
   const socket = useSelector((state: IRootState) => {
     return state.socket.socket;
    });

    useEffect(() => {
        socket.on("message", (data: any) => {
            dispatch(setMessagesData(data));
        })
    }, [])

    return (
        <div className="h-100">
            <Head>
                <title>Talk Space</title>
                <meta name="description" content="Generated by create next app"/>
                <link rel="icon" href="/favicon.png"/>
            </Head>
            <Row className="w-100 h-100">
                <Welcome/>
                <SearchUser/>
            </Row>
        </div>
    )
}
